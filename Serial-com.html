<!DOCTYPE html>
<html lang="es" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clase 13: Comunicación Serial y Sensores Avanzados</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8;
        }
        .fade-in {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }
        .fade-in.visible {
            opacity: 1;
            transform: translateY(0);
        }
        .card {
            background-color: white;
            border-radius: 1rem;
            padding: 2rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease;
        }
        .card:hover {
            transform: translateY(-5px);
        }
        .code-block {
            background-color: #1e293b;
            color: #e2e8f0;
            font-family: monospace;
            padding: 1rem;
            border-radius: 0.5rem;
            white-space: pre-wrap;
            font-size: 0.9rem;
        }
        .code-block .keyword { color: #93c5fd; } 
        .code-block .type { color: #818cf8; } 
        .code-block .function { color: #a78bfa; } 
        .code-block .comment { color: #64748b; } 
        .code-block .string { color: #f472b6; } 
        .code-block .number { color: #34d399; }
        .code-block .operator { color: #f472b6; }
    </style>
</head>
<body class="text-gray-800">

    <header class="bg-white shadow-md sticky top-0 z-10">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <div>
                <h1 class="text-2xl font-bold text-gray-900">Robótica y Electrónica 1</h1>
                <p class="text-sm text-gray-600">Clase 13: Comunicación y Distancia</p>
            </div>
            <div class="text-sm font-medium hidden md:flex space-x-4">
                <a href="#serial-deep" class="text-gray-600 hover:text-blue-600">Serial Avanzado</a>
                <a href="#ultrasonic" class="text-gray-600 hover:text-blue-600">Sensor Ultrasónico</a>
                <a href="#activity-1" class="text-gray-600 hover:text-blue-600">Actividad 1</a>
                <a href="#activity-2" class="text-gray-600 hover:text-blue-600">Actividad 2</a>
            </div>
        </nav>
    </header>

    <main class="container mx-auto px-6 py-12">

        <section id="warmup" class="text-center mb-20 fade-in">
            <h2 class="text-5xl font-extrabold mb-4 text-blue-600">Hablando con el Robot</h2>
            <p class="text-xl text-gray-600 max-w-3xl mx-auto">Hasta ahora, el Arduino nos ha "hablado" enviando datos a la pantalla. Hoy vamos a aprender a responderle. Además, le daremos un nuevo superpoder: la ecolocalización, similar a la de los murciélagos, para medir distancias sin tocar nada.</p>
        </section>

        <section id="serial-deep" class="mb-20 fade-in">
            <h3 class="text-4xl font-bold text-center mb-12">Comunicación Serial Bidireccional</h3>
            <div class="card max-w-4xl mx-auto">
                <div class="grid md:grid-cols-2 gap-8 items-center">
                    <div>
                        <h4 class="text-2xl font-bold mb-4">Tx y Rx: El Diálogo</h4>
                        <p class="mb-4">La comunicación serial ocurre a través de dos líneas: <strong>TX</strong> (Transmitir) y <strong>RX</strong> (Recibir). En el Arduino UNO, estos son los pines 0 y 1. Por eso evitamos usarlos para conectar LEDs o botones.</p>
                        <p class="mb-4 font-semibold">Funciones Clave:</p>
                        <ul class="list-disc list-inside space-y-2 mb-4">
                            <li><code>Serial.available()</code>: Pregunta "¿Hay algún mensaje nuevo llegando desde la computadora?". Devuelve el número de bytes en espera.</li>
                            <li><code>Serial.read()</code>: Lee el primer byte (carácter) que llegó y lo saca de la fila de espera.</li>
                        </ul>
                    </div>
                    <div class="bg-gray-100 p-4 rounded-lg">
                         
                         <p class="text-sm text-center mt-2 text-gray-500">El TX del Arduino va al RX de la computadora y viceversa.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="activity-1" class="mb-20 fade-in">
            <div class="card max-w-4xl mx-auto border-l-4 border-green-500">
                <h4 class="text-2xl font-bold mb-4">Actividad 1: Control por Teclado</h4>
                <p class="mb-4">Vamos a encender un LED presionando la tecla 'e' y apagarlo con la tecla 'a'.</p>
                
                <div class="code-block">
<span class="type">void</span> <span class="function">setup</span>() {
  <span class="function">pinMode</span>(<span class="number">13</span>, <span class="keyword">OUTPUT</span>);
  <span class="function">Serial</span>.<span class="function">begin</span>(<span class="number">9600</span>);
  <span class="function">Serial</span>.<span class="function">println</span>(<span class="string">"Escribe 'e' para encender, 'a' para apagar"</span>);
}

<span class="type">void</span> <span class="function">loop</span>() {
  <span class="comment">// 1. ¿Hay datos esperando ser leídos?</span>
  <span class="keyword">if</span> (<span class="function">Serial</span>.<span class="function">available</span>() > <span class="number">0</span>) {
    
    <span class="comment">// 2. Leer el dato (carácter)</span>
    <span class="type">char</span> letra <span class="operator">=</span> <span class="function">Serial</span>.<span class="function">read</span>();

    <span class="comment">// 3. Tomar decisiones</span>
    <span class="keyword">if</span> (letra <span class="operator">==</span> <span class="string">'e'</span>) {
      <span class="function">digitalWrite</span>(<span class="number">13</span>, <span class="keyword">HIGH</span>);
      <span class="function">Serial</span>.<span class="function">println</span>(<span class="string">"LED Encendido"</span>);
    } 
    <span class="keyword">else if</span> (letra <span class="operator">==</span> <span class="string">'a'</span>) {
      <span class="function">digitalWrite</span>(<span class="number">13</span>, <span class="keyword">LOW</span>);
      <span class="function">Serial</span>.<span class="function">println</span>(<span class="string">"LED Apagado"</span>);
    }
  }
}
                </div>
            </div>
        </section>

        <section id="ultrasonic" class="mb-20 fade-in">
            <h3 class="text-4xl font-bold text-center mb-12">Nuevo Sensor: Ultrasónico HC-SR04</h3>
            <div class="card max-w-4xl mx-auto">
                <div class="grid md:grid-cols-2 gap-8 items-center">
                    <div>
                        
                        <h4 class="text-2xl font-bold my-4">¿Cómo funciona?</h4>
                        <p class="mb-4">Funciona como el sonar de un submarino o un murciélago. Tiene dos "ojos" (que en realidad son bocinas/micrófonos):</p>
                        <ol class="list-decimal list-inside space-y-2">
                            <li><strong>Trig (Trigger/Gatillo):</strong> Envía un pulso de sonido ultrasónico (inaudible para humanos).</li>
                            <li><strong>Echo (Eco):</strong> Escucha y espera a que el sonido rebote en un objeto y regrese.</li>
                        </ol>
                    </div>
                    <div>
                        <h4 class="text-xl font-bold mb-2">Conexión:</h4>
                        <ul class="list-disc list-inside space-y-1 mb-4">
                            <li><strong>VCC:</strong> a 5V.</li>
                            <li><strong>GND:</strong> a GND.</li>
                            <li><strong>Trig:</strong> a un pin digital (Salida).</li>
                            <li><strong>Echo:</strong> a un pin digital (Entrada).</li>
                        </ul>
                        <h4 class="text-xl font-bold mb-2">Física:</h4>
                        <p class="text-sm bg-blue-50 p-2 rounded">Distancia = (Tiempo del viaje x Velocidad del sonido) / 2</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="activity-2" class="mb-20 fade-in">
            <div class="card max-w-4xl mx-auto border-l-4 border-blue-500">
                <h4 class="text-2xl font-bold mb-4">Actividad 2: Medidor de Distancia</h4>
                <p class="mb-4">Vamos a medir qué tan lejos está un objeto en centímetros.</p>
                
                <div class="code-block">
<span class="type">const int</span> trigPin <span class="operator">=</span> <span class="number">9</span>;
<span class="type">const int</span> echoPin <span class="operator">=</span> <span class="number">10</span>;
<span class="type">long</span> duracion;
<span class="type">int</span> distancia;

<span class="type">void</span> <span class="function">setup</span>() {
  <span class="function">pinMode</span>(trigPin, <span class="keyword">OUTPUT</span>); <span class="comment">// El emisor</span>
  <span class="function">pinMode</span>(echoPin, <span class="keyword">INPUT</span>);  <span class="comment">// El receptor</span>
  <span class="function">Serial</span>.<span class="function">begin</span>(<span class="number">9600</span>);
}

<span class="type">void</span> <span class="function">loop</span>() {
  <span class="comment">// 1. Limpiar el pin Trig (asegurar que esté bajo)</span>
  <span class="function">digitalWrite</span>(trigPin, <span class="keyword">LOW</span>);
  <span class="function">delayMicroseconds</span>(<span class="number">2</span>);

  <span class="comment">// 2. Generar un pulso de 10 microsegundos</span>
  <span class="function">digitalWrite</span>(trigPin, <span class="keyword">HIGH</span>);
  <span class="function">delayMicroseconds</span>(<span class="number">10</span>);
  <span class="function">digitalWrite</span>(trigPin, <span class="keyword">LOW</span>);

  <span class="comment">// 3. Medir el tiempo que tarda en volver el sonido (en microsegundos)</span>
  duracion <span class="operator">=</span> <span class="function">pulseIn</span>(echoPin, <span class="keyword">HIGH</span>);

  <span class="comment">// 4. Calcular distancia (Velocidad sonido = 0.034 cm/us)</span>
  <span class="comment">// Dividimos por 2 porque el sonido va y vuelve</span>
  distancia <span class="operator">=</span> duracion <span class="operator">*</span> <span class="number">0.034</span> <span class="operator">/</span> <span class="number">2</span>;

  <span class="function">Serial</span>.<span class="function">print</span>(<span class="string">"Distancia: "</span>);
  <span class="function">Serial</span>.<span class="function">print</span>(distancia);
  <span class="function">Serial</span>.<span class="function">println</span>(<span class="string">" cm"</span>);
  
  <span class="function">delay</span>(<span class="number">100</span>);
}
                </div>
            </div>
        </section>

        <section id="challenge" class="mb-20 fade-in">
             <h3 class="text-4xl font-bold text-center mb-12">Reto: Sensor de Reversa (Parking)</h3>
             <div class="card max-w-4xl mx-auto bg-yellow-50 border border-yellow-300">
                <h4 class="text-2xl font-bold text-center mb-6">¡Cuidado al estacionar!</h4>
                <p class="text-lg text-gray-700 mb-4">Combina el sensor ultrasónico con 2 LEDs (uno Verde y uno Rojo) para crear un asistente de aparcamiento.</p>
                <ul class="list-disc list-inside space-y-2 text-lg mb-6">
                    <li>Si la distancia es <strong>mayor a 20 cm</strong>: Solo enciende el LED Verde (Zona Segura).</li>
                    <li>Si la distancia es <strong>menor a 20 cm pero mayor a 10 cm</strong>: Apaga el verde y haz parpadear el LED Rojo lentamente (Precaución).</li>
                    <li>Si la distancia es <strong>menor a 10 cm</strong>: Deja el LED Rojo totalmente encendido y muestra "¡ALTO!" en el Monitor Serial.</li>
                </ul>
                <div class="text-center">
                    <a href="https://www.tinkercad.com/circuits" target="_blank" class="inline-block bg-blue-600 text-white px-10 py-4 rounded-lg font-bold text-xl hover:bg-blue-700 transition transform hover:scale-105">
                        Ir a Tinkercad
                    </a>
                </div>
             </div>
        </section>

    </main>

    <script>
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                }
            });
        }, { threshold: 0.1 });
        document.querySelectorAll('.fade-in').forEach(el => observer.observe(el));
    </script>

</body>
</html>